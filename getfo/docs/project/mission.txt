This text is in Russian, koi8-r encoding

http://xmlhack.ru/forum/xml/viewtopic.php?t=1001



	XML-форумы
Обсуждение XML и связанных с ним технологий
 Поиск   Пользователи   Регистрация   Вход
интеграция TeX и XSL-FO

Мнения: << Предыдущая тема   Следующая тема >>
Начать новую тему
Ответить на тему

 
Автор 	Сообщение
olpa
Любитель

Зарегистрирован: 23.04.2002
Сообщения: 275
Откуда: Санкт-Петербург
	
[5328] Вс Янв 04, 2004 20:09
интеграция TeX и XSL-FO
В этой теме я буду высказывать идеи по поводу интеграции TeX и XSL-FO.

Конечная цель -- изложить их в письменном виде, а также по возможности обсудить.

Мысли несвязны.

Для производства книг используется ПО. Некоторое ПО лучше, некоторое хуже. Наиболее популярны Adobe FrameMaker и TeX (есть ещё Word и прочее, но речь идёт о высококачественной продукции). Сейчас продвигается XSL-FO. В связи с развитием XML, XSL-FO будет приобретать всё больший вес, постепенно отодвинув всё на второй план.

На данный момент, мне кажется, XSL-FO является академической разработкой, не подходящей для работы. Основная причина: мало работающих процессоров, а те, которые работают, делают это в лучшем случае удовлетворительно.

Неизвестно, как процессоры устроены изнутри (это не так для open source), но в любом случае они должны как минимум превосходить возможности plain TeX. А это нетривиально. Кнут написал TeX не сразу, потратил на это много усилий, и было бы странно ожидать, что новомодные XSL-FO процессоры лучше TeX'а.

Далее. Plain TeX предоставляет свой макроязык и минимальный набор встроенных примитивов этого языка. Всё, что можно выразить через примитивы, выражается через примитивы. А вот в XSL-FO процессорах всё написано на Java (или C++, или Си -- не важно). По аналогии с обычным программированием: XSL-FO процессоры пишутся на языке низкого уровня (~ассемблере), в то время как расширения TeX'а пишутся на языке высокого уровня (~си).

Это я к тому, что ядром XSL-FO процессоров должен быть TeX.

Точнее, модифицированный TeX. Из-за своей древности, прикручивание к нему unicode и right-to-left texts (а также bottom-to-top etc) потребует некоторых усилий. Кроме того, некоторые понятия XLS-FO (TODO: какие) не особо хорошо ложатся на движок TeX'а. Но это должно решаться.

На самом деле, не обязательно делать реализацию XLS-FO на TeX. Скорее, надо создать набор "инструментальных макросов", имеющих аналоги в спецификации XSL-FO; назовём это набор "fotex".

Естественно, должен быть скрипт, переводящий fo в нечто, использующее fotex. Таким образом, будет реализация XSL-FO на TeX.

Гораздо интереснее, что при такой реализации стандарт XSL-FO нужен просто как описание базового набора макросов. Можно будет преобразовывать XML непосредственно в fotex, при необходимости обходя возможные ограничения XSL-FO (TODO: и какие, например?).

В чём сейчас беда с FO? Процессоры полностью автоматические. А, как известно, один из переводов слова "автоматически": вы не можете это исправить, если что-то пойдёт не так. Допустим, что при осмотре получившегося документа обнаружена почти пустая страница с двумя строками текста. В случае с fo остаётся только расслабиться, а в случае с fotex можно внести какую-нибудь локальную настройку для параграфа, и всё замечательно уместится на предыдущей странице.

Теперь про конвертер.

Надо генерировать не в fotex, а в промежуточный xml, эквивалентный fotex'у. Затем запускать TeX-сериализатор (можно неявно с помощью <xsl:output format="tex" />), который превращает предварительный результат в корректный fotex-файл, и при этом правильно экранирует специальные символы.

Пример:

Промежуточный результат:
<par>aaa^#\aaa& #xa0;& #x2014;</par>

TeX:
\par aaa\^\#\\aaa\space---

XML-представление может пригодиться тем, что туда можно вставлять какой-нибудь атрибут типа "patch:id", благодаря чему на результат преобразования можно будет накладывать патчи (например, исправление "только двух строчек на странице").
grig
Новичок

Зарегистрирован: 28.04.2002
Сообщения: 6
Откуда: Москва
	
[5329] Ср Янв 07, 2004 01:42
Re: интеграция TeX и XSL-FO

    olpa писал(а):

    Для производства книг используется ПО. Некоторое ПО лучше, некоторое хуже. Наиболее популярны Adobe FrameMaker и TeX (есть ещё Word и прочее, но речь идёт о высококачественной продукции). Сейчас продвигается XSL-FO. В связи с развитием XML, XSL-FO будет приобретать всё больший вес, постепенно отодвинув всё на второй план.


XSL-FO - это просто формат. Он хорош в той степени, в которой наличествуют приличные реализации, и для тех задач, под которые эти реализации заточены. В этом смысле он скорее как MIF, PDF или PostScript. MIF - абсолютное ничто без FrameMaker'а; так же и XSL-FO. Его судьба в мире книгоиздания зависит от того, появится ли удобное средство для ручной верстки, использующее его в качестве основного формата.

    Цитата:

    На данный момент, мне кажется, XSL-FO является академической разработкой, не подходящей для работы. Основная причина: мало работающих процессоров, а те, которые работают, делают это в лучшем случае удовлетворительно.


Это зависит от вида работы. XSL-FO - не лучший вариант для качественного ручного типографского набора; но он весьма удобен там, где качество пониже, а ручного вмешательства не предусмотрено. Я сужу по нашим (т.е. RenderX) заказчикам: львиная доля - это системы биллинга, генерации отчетов, подготовки документации в DocBook и т.п.

    Цитата:

    Неизвестно, как процессоры устроены изнутри (это не так для open source), но в любом случае они должны как минимум превосходить возможности plain TeX. А это нетривиально. Кнут написал TeX не сразу, потратил на это много усилий, и было бы странно ожидать, что новомодные XSL-FO процессоры лучше TeX'а.


Новомодный Adobe Document Server построен на ядре FrameMaker: он неплохо форматирует . Новомодный Arbortext Epic изначально базировался на ядре TeX (правда, оно сильно изменилось); он тоже успешно справляется с задачей. Но это все не нужно для тех приложений, о которых я говорил выше.

    Цитата:

    Далее. Plain TeX предоставляет свой макроязык и минимальный набор встроенных примитивов этого языка. Всё, что можно выразить через примитивы, выражается через примитивы. А вот в XSL-FO процессорах всё написано на Java (или C++, или Си -- не важно). По аналогии с обычным программированием: XSL-FO процессоры пишутся на языке низкого уровня (~ассемблере), в то время как расширения TeX'а пишутся на языке высокого уровня (~си).

    Это я к тому, что ядром XSL-FO процессоров должен быть TeX.


Так ведь есть же PassiveTeX, реализующий именно такую идею:

http://www.tei-c.org.uk/Software/passivetex/

Не могу сказать, что меня впечатляет результат - но может быть, он просто недоделан.

    Цитата:

    Точнее, модифицированный TeX. Из-за своей древности, прикручивание к нему unicode и right-to-left texts (а также bottom-to-top etc) потребует некоторых усилий. Кроме того, некоторые понятия XLS-FO (TODO: какие) не особо хорошо ложатся на движок TeX'а. Но это должно решаться.


Для решения вопроса потребуется модификация ядра. Написать новые примитивы на добром старом Паскале .

    Цитата:

    В чём сейчас беда с FO? Процессоры полностью автоматические. А, как известно, один из переводов слова "автоматически": вы не можете это исправить, если что-то пойдёт не так. Допустим, что при осмотре получившегося документа обнаружена почти пустая страница с двумя строками текста. В случае с fo остаётся только расслабиться, а в случае с fotex можно внести какую-нибудь локальную настройку для параграфа, и всё замечательно уместится на предыдущей странице.


А кто же мешает внести локальную настройку в FO? Я не вижу большой разницы между кодом на TeX'е и на XSL-FO. И там и там надо знать магические слова и вписать их в нужное место; "остальное - дело техники".
olpa
Любитель

Зарегистрирован: 23.04.2002
Сообщения: 275
Откуда: Санкт-Петербург
	
[5383] Вс Янв 18, 2004 16:57

    Цитата:

    XSL-FO - не лучший вариант для качественного ручного типографского набора; но он весьма удобен там, где качество пониже, а ручного вмешательства не предусмотрено.


Где качество пониже, там проблем нет.

А вот при производстве документации (не на программы, а на технику), требования в качеству высоки. И поэтому надо довёрстывать результат преобразования из XML в нечто (что FO, что FrameMaker). В случае с FM это делается, а вот про успешную довёрстку FO я ещё не слышал.

    Цитата:

    Новомодный Adobe Document Server построен на ядре FrameMaker: он неплохо форматирует


Тут такая проблема, что FM написан 7-битными американцами, так что там иногда проблемы даже с немецкими умляутами.

    Цитата:

    Arbortext Epic


К сожалению, я ничего про него не знаю, кроме того, что он дорогой.

    Цитата:


    Так ведь есть же PassiveTeX, реализующий именно такую идею:

    http://www.tei-c.org.uk/Software/passivetex/

    Не могу сказать, что меня впечатляет результат - но может быть, он просто недоделан.


Автор сам говорит, что это "proof of concept". Причём я подозреваю, что concept там не то, что основой для FO является TeX, а то, что на plain TeX'e можно написать XML-парсер.

    Цитата:

    Для решения вопроса потребуется модификация ядра. Написать новые примитивы на добром старом Паскале.


Видимо, да. Надо смотреть. Раз TeXXeT (расширение для работы с right-to-left) существует, значит писать новые примитивы можно.

    Цитата:

    А кто же мешает внести локальную настройку в FO? Я не вижу большой разницы между кодом на TeX'е и на XSL-FO. И там и там надо знать магические слова и вписать их в нужное место; "остальное - дело техники".


Не всегда достаточно магического слова. Иногда нужно вписать магическую программу, которая должна иметь доступ ко всему окружению и которая должна иметь возможность анализировать что-если-поставить-блок-туда.
Anton Boyarshinov
Гость




	
[5384] Пн Янв 19, 2004 14:47

    olpa писал(а):


        Цитата:


        Так ведь есть же PassiveTeX, реализующий именно такую идею:

        http://www.tei-c.org.uk/Software/passivetex/

        Не могу сказать, что меня впечатляет результат - но может быть, он просто недоделан.


    Автор сам говорит, что это "proof of concept". Причём я подозреваю, что concept там не то, что основой для FO является TeX, а то, что на plain TeX'e можно написать XML-парсер.



Нет. Там используется готовый XML парсер на TeX -- xmltex. Я хорошо изучил внутренности passivetex и возьму на себя смелость утверждать что он никогда не будет доделан (во всяком случае, если останется на базе немодифицированного TeX). Главное что жмёт (ИМХО) количество параметров, которые можно передать в макрос. Но, вообще говоря сильно не хватает возможности "оглядеться вокруг" -- посмотреть внутри какой конструкции мы находимся в данный момент и т. п.
Показать сообщения:
  	Список форумов XML-форумы -> Мнения -> интеграция TeX и XSL-FO 	Часовой пояс: GMT + 3
Страница 1 из 1 	
	
Перейти:  

Вы не можете начинать темы
Вы можете отвечать на сообщения
Вы не можете редактировать свои сообщения
Вы не можете удалять свои сообщения
Вы не можете голосовать в опросах

Powered by phpBB 2.0.6 ╘ 2001, 2002 phpBB Group
